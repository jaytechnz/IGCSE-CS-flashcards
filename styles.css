/* ═══════════════════════════════════════════════════
   CS 0478 FlashCards — Stylesheet
   Palette: #ffdc54 · #ffe0c9 · #3a3229 · #ffa92a · #3d6d8e
   ═══════════════════════════════════════════════════ */

/* ── OpenDyslexic (loaded from CDN) ── */
@font-face {
    font-family: 'OpenDyslexic';
    src: url('https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/woff/OpenDyslexic-Regular.woff') format('woff');
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}
@font-face {
    font-family: 'OpenDyslexic';
    src: url('https://cdn.jsdelivr.net/npm/open-dyslexic@1.0.3/woff/OpenDyslexic-Bold.woff') format('woff');
    font-weight: 700;
    font-style: normal;
    font-display: swap;
}

/* ─────────────── DESIGN TOKENS ─────────────── */
:root {
    /* Fonts */
    --ff-display: 'Fraunces', Georgia, serif;
    --ff-body: 'DM Sans', system-ui, sans-serif;

    /* Sizing / spacing */
    --radius-sm: 8px;
    --radius-md: 14px;
    --radius-lg: 22px;
    --radius-card: 20px;
    --transition-fast: .2s ease;
    --transition-med: .35s ease;

    /* Sidebar */
    --sidebar-w: 300px;
}

/* ─────────────── LIGHT THEME ─────────────── */
[data-theme="light"] {
    --bg-page: #ffe0c9;
    --bg-sidebar: #fff8f0;
    --bg-card-front: #ffffff;
    --bg-card-back: #3d6d8e;
    --bg-topbar: #fff8f0ee;
    --bg-btn: #ffe0c9;
    --bg-btn-hover: #ffd4b3;

    --text-primary: #3a3229;
    --text-secondary: #5c4f44;
    --text-tertiary: #8a7d72;
    --text-card-back: #ffffff;
    --text-accent: #ffa92a;
    --text-on-primary: #3a3229;

    --border-light: #f0d8c4;
    --border-medium: #e0c5ad;

    --conf-no-bg: #fde8e8;
    --conf-no-border: #e88;
    --conf-no-text: #b33;
    --conf-maybe-bg: #fff5e0;
    --conf-maybe-border: #ffdc54;
    --conf-maybe-text: #a07800;
    --conf-yes-bg: #e3f8e8;
    --conf-yes-border: #6bcb77;
    --conf-yes-text: #1e8449;

    --lbox1: #cc3333;
    --lbox2: #ffa92a;
    --lbox3: #1e8449;

    --progress-bg: #f0d8c4;
    --progress-fill: #3d6d8e;

    --badge-bg: #ffe0c9;
    --badge-text: #5c4f44;
    --badge-def-bg: rgba(255,255,255,.18);
    --badge-def-text: #ffdc54;

    --shadow-card: 0 8px 30px rgba(58,50,41,.10), 0 2px 8px rgba(58,50,41,.06);
    --shadow-card-hover: 0 14px 40px rgba(58,50,41,.16), 0 4px 12px rgba(58,50,41,.08);
}

/* ─────────────── DARK THEME ─────────────── */
[data-theme="dark"] {
    --bg-page: #1e1a16;
    --bg-sidebar: #2a2420;
    --bg-card-front: #332c26;
    --bg-card-back: #3d6d8e;
    --bg-topbar: #2a2420ee;
    --bg-btn: #3a3229;
    --bg-btn-hover: #4a4138;

    --text-primary: #ffe0c9;
    --text-secondary: #c4ad9a;
    --text-tertiary: #8a7d72;
    --text-card-back: #ffffff;
    --text-accent: #ffdc54;
    --text-on-primary: #3a3229;

    --border-light: #3a3229;
    --border-medium: #4a4138;

    --conf-no-bg: #3a1c1c;
    --conf-no-border: #b33;
    --conf-no-text: #f5a3a3;
    --conf-maybe-bg: #3a3018;
    --conf-maybe-border: #ffa92a;
    --conf-maybe-text: #ffdc54;
    --conf-yes-bg: #1a3a22;
    --conf-yes-border: #1e8449;
    --conf-yes-text: #6bcb77;

    --lbox1: #ff6b6b;
    --lbox2: #ffdc54;
    --lbox3: #51cf66;

    --progress-bg: #3a3229;
    --progress-fill: #ffdc54;

    --badge-bg: #3a3229;
    --badge-text: #c4ad9a;
    --badge-def-bg: rgba(0,0,0,.25);
    --badge-def-text: #ffdc54;

    --shadow-card: 0 8px 30px rgba(0,0,0,.35), 0 2px 8px rgba(0,0,0,.25);
    --shadow-card-hover: 0 14px 40px rgba(0,0,0,.45), 0 4px 12px rgba(0,0,0,.3);
}

/* ─────────────── DYSLEXIC MODE ─────────────── */
[data-dyslexic="true"] {
    --ff-display: 'OpenDyslexic', sans-serif;
    --ff-body: 'OpenDyslexic', sans-serif;
}

/* ─────────────── RESET / BASE ─────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html {
    font-size: 16px;
    scroll-behavior: smooth;
}

body {
    font-family: var(--ff-body);
    color: var(--text-primary);
    min-height: 100vh;
    transition: background var(--transition-med), color var(--transition-med);
    overflow-x: hidden;
}

/* Subtle background texture — pushed behind everything */
body::before {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: -1;
    background-image: radial-gradient(circle at 1px 1px, var(--border-light) .6px, transparent 0);
    background-size: 32px 32px;
    opacity: .3;
}

/* ─────────────── TOP BAR ─────────────── */
.top-bar {
    position: sticky;
    top: 0;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: .75rem 1.5rem;
    background: var(--bg-topbar);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    border-bottom: 1px solid var(--border-light);
    transition: background var(--transition-med);
}
.top-bar-left { display: flex; align-items: center; gap: .6rem; }
.logo-icon { font-size: 1.5rem; }
.logo-text {
    font-family: var(--ff-display);
    font-size: 1.25rem;
    font-weight: 800;
    letter-spacing: -.02em;
}
.accent { color: var(--text-accent); }

.top-bar-right { display: flex; align-items: center; gap: .5rem; }

.icon-btn {
    display: inline-flex;
    align-items: center;
    gap: .35rem;
    padding: .45rem .75rem;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-sm);
    background: var(--bg-btn);
    color: var(--text-primary);
    cursor: pointer;
    font-family: var(--ff-body);
    font-size: .82rem;
    font-weight: 500;
    transition: background var(--transition-fast), border-color var(--transition-fast);
}
.icon-btn:hover { background: var(--bg-btn-hover); border-color: var(--border-medium); }
.icon-btn svg { flex-shrink: 0; }

/* Sun / moon icon toggle */
[data-theme="light"] .icon-moon { display: none; }
[data-theme="dark"] .icon-sun { display: none; }

/* Dyslexic active state */
.icon-btn.active {
    background: var(--text-accent);
    color: var(--text-on-primary);
    border-color: var(--text-accent);
}
.icon-btn.active svg { stroke: var(--text-on-primary); }

/* ─────────────── LAYOUT ─────────────── */
.main-content {
    position: relative;
    display: flex;
    height: calc(100vh - 56px);
}

/* ─────────────── SIDEBAR ─────────────── */
.sidebar {
    width: var(--sidebar-w);
    flex-shrink: 0;
    background: var(--bg-sidebar);
    border-right: 1px solid var(--border-light);
    display: flex;
    flex-direction: column;
    transition: background var(--transition-med), transform var(--transition-med);
    overflow: hidden;
}
.sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.2rem 1.25rem .8rem;
    border-bottom: 1px solid var(--border-light);
}
.sidebar-header h2 {
    font-family: var(--ff-display);
    font-size: 1.15rem;
    font-weight: 700;
}
.sidebar-close {
    display: none;
    background: none;
    border: none;
    font-size: 1.6rem;
    color: var(--text-secondary);
    cursor: pointer;
    line-height: 1;
}

.sidebar-body {
    flex: 1;
    overflow-y: auto;
    padding: .5rem 0;
}

/* Topic accordion items */
.topic-unit {
    border-bottom: 1px solid var(--border-light);
}
.unit-header {
    display: flex;
    align-items: center;
    gap: .5rem;
    width: 100%;
    padding: .75rem 1.25rem;
    background: none;
    border: none;
    cursor: pointer;
    font-family: var(--ff-body);
    font-size: .88rem;
    font-weight: 700;
    color: var(--text-primary);
    text-align: left;
    transition: background var(--transition-fast);
}
.unit-header:hover { background: var(--bg-btn); }
.unit-header .arrow {
    margin-left: auto;
    transition: transform var(--transition-fast);
    color: var(--text-tertiary);
    font-size: .75rem;
}
.topic-unit.open .unit-header .arrow { transform: rotate(90deg); }

.subtopic-list {
    display: none;
    padding: 0 1rem .5rem 1.6rem;
}
.topic-unit.open .subtopic-list { display: block; }

.subtopic-item {
    display: flex;
    align-items: center;
    gap: .5rem;
    padding: .4rem .5rem;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: background var(--transition-fast);
    font-size: .84rem;
    color: var(--text-secondary);
}
.subtopic-item:hover { background: var(--bg-btn); }

.subtopic-item input[type="checkbox"] {
    accent-color: var(--text-accent);
    width: 16px;
    height: 16px;
    cursor: pointer;
}
.subtopic-item label {
    cursor: pointer;
    flex: 1;
    line-height: 1.35;
}

/* Subtopic progress mini-bars */
.subtopic-progress {
    display: block;
    width: 100%;
    margin-top: .25rem;
    margin-left: 1.6rem;
}
.prog-bar {
    display: flex;
    height: 4px;
    border-radius: 99px;
    background: var(--progress-bg);
    overflow: hidden;
    width: 100%;
}
.prog-yes {
    background: var(--lbox3);
    height: 100%;
    transition: width .3s ease;
}
.prog-maybe {
    background: var(--lbox2);
    height: 100%;
    transition: width .3s ease;
}

/* Select-all row */
.select-all-row {
    padding: .65rem 1.25rem;
    border-bottom: 1px solid var(--border-light);
}
.select-all-row .subtopic-item {
    font-weight: 600;
    color: var(--text-accent);
}

.sidebar-footer {
    padding: 1rem 1.25rem;
    border-top: 1px solid var(--border-light);
}

/* Card count badge in footer */
.card-count {
    display: block;
    text-align: center;
    font-size: .78rem;
    color: var(--text-tertiary);
    margin-bottom: .5rem;
}

/* ─────────────── BUTTONS ─────────────── */
.btn-primary {
    width: 100%;
    padding: .75rem 1.5rem;
    border: none;
    border-radius: var(--radius-md);
    background: var(--text-accent);
    color: var(--text-on-primary);
    font-family: var(--ff-body);
    font-size: .95rem;
    font-weight: 700;
    cursor: pointer;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast), opacity var(--transition-fast);
}
.btn-primary:hover { transform: translateY(-1px); box-shadow: 0 4px 16px rgba(255,169,42,.35); }
.btn-primary:active { transform: translateY(0); }
.btn-primary:disabled { opacity: .4; cursor: not-allowed; transform: none; box-shadow: none; }

.btn-reset {
    display: block;
    width: 100%;
    margin-top: .5rem;
    padding: .45rem 1rem;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-sm);
    background: none;
    color: var(--text-tertiary);
    font-family: var(--ff-body);
    font-size: .78rem;
    cursor: pointer;
    transition: color var(--transition-fast), border-color var(--transition-fast);
}
.btn-reset:hover { color: var(--conf-no-text); border-color: var(--conf-no-border); }

.btn-secondary {
    padding: .55rem 1.25rem;
    border: 1px solid var(--border-medium);
    border-radius: var(--radius-sm);
    background: var(--bg-btn);
    color: var(--text-primary);
    font-family: var(--ff-body);
    font-size: .88rem;
    font-weight: 500;
    cursor: pointer;
    transition: background var(--transition-fast);
}
.btn-secondary:hover { background: var(--bg-btn-hover); }

/* ─────────────── HAMBURGER (mobile) ─────────────── */
.hamburger {
    display: none;
    position: fixed;
    bottom: 1.25rem;
    left: 1.25rem;
    z-index: 90;
    width: 52px;
    height: 52px;
    border-radius: 50%;
    border: none;
    background: var(--text-accent);
    box-shadow: 0 4px 18px rgba(255,169,42,.4);
    cursor: pointer;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    transition: transform var(--transition-fast);
}
.hamburger:hover { transform: scale(1.08); }
.hamburger span {
    display: block;
    width: 22px;
    height: 2.5px;
    background: #3a3229;
    border-radius: 2px;
}

/* ─────────────── STUDY AREA ─────────────── */
.study-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 1rem 1.5rem;
    background: url('light-wood-background.jpg') center / cover no-repeat fixed;
}

[data-theme="dark"] .study-area {
    background: linear-gradient(rgba(30,26,22,.5), rgba(30,26,22,.5)),
                url('light-wood-background.jpg') center / cover no-repeat fixed;
}

.study-center {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
}

.study-footer {
    padding: 0.5rem;
    text-align: center;
}

/* ── Welcome ── */
.welcome-state, .complete-state {
    text-align: center;
    max-width: 480px;
    animation: fadeUp .5s ease both;
}
.welcome-inner, .complete-inner {
    padding: 1.5rem;
    background: var(--bg-sidebar);
    border-radius: var(--radius-lg);
    box-shadow: 0 4px 20px rgba(58,50,41,.15);
}

.welcome-emoji {
    font-size: 2.5rem;
    display: block;
    margin-bottom: 0.5rem;
}

.welcome-state h2, .complete-state h2 {
    font-family: var(--ff-display);
    font-size: 1.3rem;
    font-weight: 800;
    margin-bottom: .4rem;
}

.welcome-state p { color: var(--text-secondary); line-height: 1.6; margin-bottom: .5rem; }
.welcome-sub { font-size: .88rem; color: var(--text-tertiary); }

/* ── Card View ── */
.card-view {
    width: 100%;
    max-width: 560px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.25rem;
    animation: fadeUp .4s ease both;
}

/* Progress */
.progress-row {
    width: 100%;
    display: flex;
    align-items: center;
    gap: .75rem;
}
.progress-bar-track {
    flex: 1;
    height: 8px;
    border-radius: 99px;
    background: var(--progress-bg);
    overflow: hidden;
}
.progress-bar-fill {
    height: 100%;
    width: 0%;
    border-radius: 99px;
    background: var(--progress-fill);
    transition: width .4s ease;
}
.progress-text {
    font-size: .82rem;
    font-weight: 600;
    color: var(--text-secondary);
    white-space: nowrap;
    background: rgba(255,255,255,.7);
    padding: .15rem .5rem;
    border-radius: 99px;
}
[data-theme="dark"] .progress-text {
    background: rgba(0,0,0,.4);
}

/* Leitner boxes */
.leitner-boxes {
    display: flex;
    gap: .6rem;
    width: 100%;
}
.lbox {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: .45rem .5rem;
    border-radius: var(--radius-sm);
    background: var(--bg-sidebar);
    border: 1px solid var(--border-light);
    transition: background var(--transition-med), border-color var(--transition-med);
}
.lbox-label {
    font-size: .65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: .04em;
    color: var(--text-tertiary);
    margin-bottom: .1rem;
}
.lbox-count {
    font-size: 1.1rem;
    font-weight: 700;
}
.lbox[data-box="1"] .lbox-count { color: var(--lbox1); }
.lbox[data-box="2"] .lbox-count { color: var(--lbox2); }
.lbox[data-box="3"] .lbox-count { color: var(--lbox3); }

/* ─────────────── FLASHCARD ─────────────── */
.card-container {
    width: 100%;
    perspective: 1200px;
}

.flashcard {
    position: relative;
    width: 100%;
    aspect-ratio: 5 / 3;
    cursor: pointer;
    transform-style: preserve-3d;
    transition: transform .55s cubic-bezier(.4,.2,.2,1);
    outline: none;
    -webkit-tap-highlight-color: transparent;
}
.flashcard:focus-visible {
    outline: 3px solid var(--text-accent);
    outline-offset: 4px;
    border-radius: var(--radius-card);
}
.flashcard.flipped { transform: rotateY(180deg); }

.card-face {
    position: absolute;
    inset: 0;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    border-radius: var(--radius-card);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem 2.25rem;
    box-shadow: var(--shadow-card);
    transition: box-shadow var(--transition-med);
    overflow: hidden;
}
.flashcard:hover .card-face { box-shadow: var(--shadow-card-hover); }

.card-front {
    background: var(--bg-card-front);
    color: var(--text-primary);
    border: 1px solid var(--border-light);
}
/* Decorative corner — warm yellow */
.card-front::before {
    content: '';
    position: absolute;
    top: -40px;
    right: -40px;
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: #ffdc54;
    opacity: .12;
}

.card-back {
    background: var(--bg-card-back);
    color: var(--text-card-back);
    transform: rotateY(180deg);
}
/* Decorative corner — peach glow */
.card-back::before {
    content: '';
    position: absolute;
    bottom: -30px;
    left: -30px;
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: #ffe0c9;
    opacity: .1;
}

.card-badge {
    position: absolute;
    top: 1rem;
    left: 1.25rem;
    font-size: .68rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: .08em;
    padding: .2rem .6rem;
    border-radius: 99px;
    background: var(--badge-bg);
    color: var(--badge-text);
}
.badge-def {
    background: var(--badge-def-bg);
    color: var(--badge-def-text);
}

.card-text {
    font-size: 1.3rem;
    font-weight: 500;
    text-align: center;
    line-height: 1.5;
    max-height: 100%;
    overflow-y: auto;
}
.card-front .card-text {
    font-family: var(--ff-display);
    font-weight: 700;
    font-size: 1.5rem;
}

.card-hint {
    position: absolute;
    bottom: .85rem;
    font-size: .7rem;
    color: var(--text-tertiary);
    opacity: .6;
}
.card-back .card-hint { color: var(--badge-def-text); opacity: .5; }

/* ─────────────── CONFIDENCE BUTTONS ─────────────── */
.confidence-buttons {
    display: flex;
    gap: .6rem;
    width: 100%;
}

.conf-btn {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: .2rem;
    padding: .65rem .5rem;
    border-radius: var(--radius-md);
    border: 2px solid transparent;
    cursor: pointer;
    font-family: var(--ff-body);
    font-size: .78rem;
    font-weight: 600;
    transition: transform var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast);
}
.conf-btn:hover { transform: translateY(-2px); }
.conf-btn:active { transform: translateY(0); }

.conf-icon {
    font-size: 1.25rem;
    font-weight: 800;
    line-height: 1;
}

.conf-no { background: var(--conf-no-bg); border-color: var(--conf-no-border); color: var(--conf-no-text); }
.conf-no:hover { box-shadow: 0 4px 14px rgba(187,51,51,.2); }
.conf-maybe { background: var(--conf-maybe-bg); border-color: var(--conf-maybe-border); color: var(--conf-maybe-text); }
.conf-maybe:hover { box-shadow: 0 4px 14px rgba(255,169,42,.25); }
.conf-yes { background: var(--conf-yes-bg); border-color: var(--conf-yes-border); color: var(--conf-yes-text); }
.conf-yes:hover { box-shadow: 0 4px 14px rgba(30,132,73,.2); }

/* Card nav */
.card-nav {
    display: flex;
    justify-content: center;
    gap: .75rem;
}

/* ─────────────── COMPLETE STATE ─────────────── */
.results-grid {
    display: flex;
    justify-content: center;
    gap: 1.25rem;
    margin: 1.25rem 0;
}
.result-item {
    text-align: center;
}
.result-num {
    display: block;
    font-size: 2rem;
    font-family: var(--ff-display);
    font-weight: 800;
}
.result-label {
    font-size: .75rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: .04em;
}
.result-no .result-num { color: var(--lbox1); }
.result-maybe .result-num { color: var(--lbox2); }
.result-yes .result-num { color: var(--lbox3); }

#results-message {
    color: var(--text-secondary);
    margin-bottom: 1.25rem;
    line-height: 1.5;
}
.complete-actions {
    display: flex;
    gap: .75rem;
    justify-content: center;
    flex-wrap: wrap;
}
.complete-actions .btn-primary { width: auto; }

/* ─────────────── STUDENT MODAL ─────────────── */
.student-modal-overlay {
    position: fixed;
    inset: 0;
    z-index: 999;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(58, 50, 41, .6);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    animation: modalFadeIn .3s ease both;
}
.student-modal {
    background: var(--bg-sidebar);
    border-radius: var(--radius-lg);
    padding: 2rem 2rem 1.5rem;
    max-width: 380px;
    width: 90%;
    box-shadow: 0 16px 48px rgba(58, 50, 41, .25);
    text-align: center;
    animation: modalSlideUp .35s ease both;
}
.student-modal h2 {
    font-family: var(--ff-display);
    font-size: 1.4rem;
    font-weight: 800;
    margin-bottom: .5rem;
}
.student-modal p {
    color: var(--text-secondary);
    font-size: .9rem;
    line-height: 1.5;
    margin-bottom: 1rem;
}
.student-field {
    text-align: left;
    margin-bottom: 1rem;
}
.student-field label {
    display: block;
    font-size: .8rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: .35rem;
}
.student-field input {
    width: 100%;
    padding: .6rem .85rem;
    border: 2px solid var(--border-light);
    border-radius: var(--radius-sm);
    background: var(--bg-card-front);
    color: var(--text-primary);
    font-family: var(--ff-body);
    font-size: .95rem;
    transition: border-color var(--transition-fast);
    outline: none;
}
.student-field input:focus {
    border-color: var(--text-accent);
}
.student-field input::placeholder {
    color: var(--text-tertiary);
}
.student-modal .btn-primary {
    margin-top: .25rem;
}
.student-note {
    font-size: .75rem !important;
    color: var(--text-tertiary) !important;
    margin-top: .75rem;
    margin-bottom: 0 !important;
}

@keyframes modalFadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
}
@keyframes modalSlideUp {
    from { opacity: 0; transform: translateY(24px) scale(.96); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
}

/* ─────────────── ANIMATIONS ─────────────── */
@keyframes fadeUp {
    from { opacity: 0; transform: translateY(18px); }
    to   { opacity: 1; transform: translateY(0); }
}

.hidden { display: none !important; }

/* ─────────────── RESPONSIVE ─────────────── */

/* Tablets */
@media (max-width: 900px) {
    .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        z-index: 200;
        transform: translateX(-100%);
        box-shadow: 4px 0 24px rgba(58,50,41,.2);
    }
    .sidebar.open { transform: translateX(0); }
    .sidebar-close { display: block; }
    .hamburger { display: flex; }

    /* overlay */
    .sidebar-overlay {
        position: fixed;
        inset: 0;
        z-index: 190;
        background: rgba(58,50,41,.45);
        opacity: 0;
        pointer-events: none;
        transition: opacity var(--transition-med);
    }
    .sidebar-overlay.show { opacity: 1; pointer-events: auto; }
}

/* Phones */
@media (max-width: 600px) {
    .top-bar { padding: .6rem 1rem; }
    .logo-text { font-size: 1.05rem; }
    .btn-label { display: none; }
    .icon-btn { padding: .45rem; }

    .study-area { padding: 1rem .75rem; }

    .flashcard { aspect-ratio: 4 / 3; }
    .card-face { padding: 1.5rem 1.25rem; }
    .card-front .card-text { font-size: 1.2rem; }
    .card-text { font-size: 1.05rem; }

    .confidence-buttons { gap: .4rem; }
    .conf-btn { padding: .55rem .3rem; font-size: .72rem; }
    .conf-icon { font-size: 1.1rem; }

    .leitner-boxes { gap: .4rem; }
    .lbox { padding: .35rem .3rem; }
    .lbox-label { font-size: .6rem; }

    .sidebar { width: 85vw; max-width: 320px; }
}

/* Large screens */
@media (min-width: 1200px) {
    .card-view { max-width: 620px; }
    .card-text { font-size: 1.4rem; }
    .card-front .card-text { font-size: 1.65rem; }
}
